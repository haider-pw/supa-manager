data_dir: /var/lib/vector

sources:
  docker_host:
    type: docker_logs

  docker_logs:
    type: internal_logs

transforms:
  parse_logs:
    type: remap
    inputs:
      - docker_host
    source: |
      .project_id = "{{.ProjectID}}"
      .project_name = "{{.ProjectName}}"

sinks:
  logflare_logs:
    type: http
    inputs:
      - parse_logs
    encoding:
      codec: json
    uri: http://analytics:4000/api/logs
    batch:
      max_bytes: 1048576
      max_events: 1000
      timeout_secs: 1
